WFSLIB_DIR=wfslib
WFSDUMP_DIR=wfsdump
WFSFUSE_DIR=wfs-fuse
WFS_FILE_INJECTOR_DIR=wfs-file-injector
SUBDIRS=$(WFSLIB_DIR) $(WFSDUMP_DIR) $(WFSFUSE_DIR) $(WFS_FILE_INJECTOR_DIR)
CLEAN_SUBDIRS=$(addsuffix clean,$(SUBDIRS))

.PHONY: all clean $(SUBDIRS) $(CLEAN_SUBDIRS)

all: $(SUBDIRS)

clean: $(CLEAN_SUBDIRS)

$(WFSDUMP_DIR): $(WFSLIB_DIR)
$(WFSFUSE_DIR): $(WFSLIB_DIR)
$(WFS_FILE_INJECTOR_DIR): $(WFSLIB_DIR)

$(SUBDIRS):
	$(MAKE) -C $@

$(CLEAN_SUBDIRS):
	$(MAKE) -C $(@:%clean=%) clean
